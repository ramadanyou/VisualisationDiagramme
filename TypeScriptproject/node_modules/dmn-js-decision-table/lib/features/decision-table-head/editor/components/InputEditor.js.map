{"version":3,"file":"InputEditor.js","names":["Component","ContentEditable","LiteralExpression","InputEditor","constructor","props","context","event","key","stopPropagation","translate","injector","get","noopTranslate","expressionLanguages","variableResolver","handleValue","text","change","handleChange","handleLabelChange","value","label","undefined","changes","onChange","getExpressionEditorComponent","getDefault","_getVariables","getVariables","element","render","ExpressionEditor","variables","join","handleKeyDown","str"],"sources":["../../../../../src/features/decision-table-head/editor/components/InputEditor.js"],"sourcesContent":["import { Component } from 'inferno';\n\nimport ContentEditable from 'dmn-js-shared/lib/components/ContentEditable';\nimport LiteralExpression from 'dmn-js-shared/lib/components/LiteralExpression';\n\nexport default class InputEditor extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.translate = context.injector ? context.injector.get('translate') : noopTranslate;\n    this.expressionLanguages = context.injector.get('expressionLanguages', false);\n    this.variableResolver = context.injector.get('variableResolver', false);\n\n    this.handleValue = (text) => {\n\n      let change = { text };\n\n      this.handleChange(change);\n    };\n\n    this.handleLabelChange = (value) => {\n\n      // default to <undefined> for empty string\n      var label = value || undefined;\n\n      this.handleChange({ label });\n    };\n  }\n\n  handleChange(changes) {\n    var { onChange } = this.props;\n\n    if (typeof onChange === 'function') {\n      onChange(changes);\n    }\n  }\n\n  getExpressionEditorComponent() {\n    if (this.expressionLanguages &&\n      this.expressionLanguages.getDefault('inputCell').value !== 'feel') {\n      return ContentEditable;\n    }\n\n    return LiteralExpression;\n  }\n\n  /**\n   * Supress default menu closure on enter.\n   * @param {KeyboardEvent} event\n   */\n  handleKeyDown = event => {\n    if (event.key === 'Enter') {\n      event.stopPropagation();\n    }\n  };\n\n  _getVariables() {\n    return this.variableResolver &&\n      this.variableResolver.getVariables(this.props.element);\n  }\n\n  render() {\n\n    const {\n      label,\n      text\n    } = this.props;\n\n    const ExpressionEditor = this.getExpressionEditorComponent();\n\n    const variables = this._getVariables();\n\n    return (\n      <div className=\"context-menu-container ref-input-editor input-edit\"\n        onKeyDown={ this.handleKeyDown }>\n\n        <div className=\"dms-form-control\">\n          <ContentEditable\n            className=\"dms-input-label\"\n            value={ label || '' }\n            placeholder={ this.translate('Input') }\n            singleLine\n            onInput={ this.handleLabelChange } />\n        </div>\n\n        <div className=\"dms-form-control\">\n          <label className=\"dms-label\">\n            {\n              this.translate('Expression')\n            }\n          </label>\n\n          <ExpressionEditor\n            placeholder={ this.translate('Enter expression') }\n            className={\n              [\n                'ref-text',\n                'dms-input'\n              ].join(' ')\n            }\n            onInput={ this.handleValue }\n            value={ text || '' }\n            variables={ variables } />\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction noopTranslate(str) {\n  return str;\n}\n"],"mappings":";;;;AAAA,SAASA,SAAS,QAAQ,SAAS;AAEnC,OAAOC,eAAe,MAAM,8CAA8C;AAC1E,OAAOC,iBAAiB,MAAM,gDAAgD;AAE9E,eAAe,MAAMC,WAAW,SAASH,SAAS,CAAC;EAEjDI,WAAW,CAACC,KAAK,EAAEC,OAAO,EAAE;IAC1B,KAAK,CAACD,KAAK,EAAEC,OAAO,CAAC;IAAC,uCA2CRC,KAAK,IAAI;MACvB,IAAIA,KAAK,CAACC,GAAG,KAAK,OAAO,EAAE;QACzBD,KAAK,CAACE,eAAe,EAAE;MACzB;IACF,CAAC;IA7CC,IAAI,CAACC,SAAS,GAAGJ,OAAO,CAACK,QAAQ,GAAGL,OAAO,CAACK,QAAQ,CAACC,GAAG,CAAC,WAAW,CAAC,GAAGC,aAAa;IACrF,IAAI,CAACC,mBAAmB,GAAGR,OAAO,CAACK,QAAQ,CAACC,GAAG,CAAC,qBAAqB,EAAE,KAAK,CAAC;IAC7E,IAAI,CAACG,gBAAgB,GAAGT,OAAO,CAACK,QAAQ,CAACC,GAAG,CAAC,kBAAkB,EAAE,KAAK,CAAC;IAEvE,IAAI,CAACI,WAAW,GAAIC,IAAI,IAAK;MAE3B,IAAIC,MAAM,GAAG;QAAED;MAAK,CAAC;MAErB,IAAI,CAACE,YAAY,CAACD,MAAM,CAAC;IAC3B,CAAC;IAED,IAAI,CAACE,iBAAiB,GAAIC,KAAK,IAAK;MAElC;MACA,IAAIC,KAAK,GAAGD,KAAK,IAAIE,SAAS;MAE9B,IAAI,CAACJ,YAAY,CAAC;QAAEG;MAAM,CAAC,CAAC;IAC9B,CAAC;EACH;EAEAH,YAAY,CAACK,OAAO,EAAE;IACpB,IAAMC,QAAQ,GAAK,IAAI,CAACpB,KAAK,CAAvBoB,QAAQ;IAEd,IAAI,OAAOA,QAAQ,KAAK,UAAU,EAAE;MAClCA,QAAQ,CAACD,OAAO,CAAC;IACnB;EACF;EAEAE,4BAA4B,GAAG;IAC7B,IAAI,IAAI,CAACZ,mBAAmB,IAC1B,IAAI,CAACA,mBAAmB,CAACa,UAAU,CAAC,WAAW,CAAC,CAACN,KAAK,KAAK,MAAM,EAAE;MACnE,OAAOpB,eAAe;IACxB;IAEA,OAAOC,iBAAiB;EAC1B;;EAEA;AACF;AACA;AACA;;EAOE0B,aAAa,GAAG;IACd,OAAO,IAAI,CAACb,gBAAgB,IAC1B,IAAI,CAACA,gBAAgB,CAACc,YAAY,CAAC,IAAI,CAACxB,KAAK,CAACyB,OAAO,CAAC;EAC1D;EAEAC,MAAM,GAAG;IAEP,oBAGI,IAAI,CAAC1B,KAAK;MAFZiB,KAAK,eAALA,KAAK;MACLL,IAAI,eAAJA,IAAI;IAGN,MAAMe,gBAAgB,GAAG,IAAI,CAACN,4BAA4B,EAAE;IAE5D,MAAMO,SAAS,GAAG,IAAI,CAACL,aAAa,EAAE;IAEtC,6BACiB,oDAAoD,yBAGlD,kBAAkB;MAAA,aAEnB,iBAAiB;MAAA,SACnBN,KAAK,IAAI,EAAE;MAAA,eACL,IAAI,CAACZ,SAAS,CAAC,OAAO,CAAC;MAAA;MAAA,WAE3B,IAAI,CAACU;IAAiB,8BAGrB,kBAAkB,2BACd,WAAW,EAExB,IAAI,CAACV,SAAS,CAAC,YAAY,CAAC;MAAA,eAKhB,IAAI,CAACA,SAAS,CAAC,kBAAkB,CAAC;MAAA,aAE9C,CACE,UAAU,EACV,WAAW,CACZ,CAACwB,IAAI,CAAC,GAAG,CAAC;MAAA,WAEH,IAAI,CAAClB,WAAW;MAAA,SAClBC,IAAI,IAAI,EAAE;MAAA,aACNgB;IAAS;MAAA,aA5Bb,IAAI,CAACE;IAAa;EAgCpC;AACF;AAEA,SAAStB,aAAa,CAACuB,GAAG,EAAE;EAC1B,OAAOA,GAAG;AACZ"}