{"version":3,"file":"OutlineProvider.js","names":["assign","attr","svgAttr","create","svgCreate","is","isAny","BUSINESS_KNOWLEDGE_MODEL_OUTLINE_PATH","KNOWLEDGE_SOURCE_OUTLINE_PATH","BUSINESS_KNOWLEDGE_MODEL_STANDARD_SIZE","KNOWLEDGE_SOURCE_STANDARD_SIZE","createPath","DEFAULT_OFFSET","OutlineProvider","outline","styles","_styles","registerProvider","$inject","prototype","getOutline","element","OUTLINE_STYLE","cls","x","y","rx","width","height","isStandardSize","updateOutline","type","standardSize"],"sources":["../../../src/features/outline/OutlineProvider.js"],"sourcesContent":["import { assign } from 'min-dash';\n\nimport {\n  attr as svgAttr,\n  create as svgCreate\n} from 'tiny-svg';\n\nimport {\n  is,\n  isAny\n} from 'dmn-js-shared/lib/util/ModelUtil';\n\nimport {\n  BUSINESS_KNOWLEDGE_MODEL_OUTLINE_PATH,\n  KNOWLEDGE_SOURCE_OUTLINE_PATH,\n  BUSINESS_KNOWLEDGE_MODEL_STANDARD_SIZE,\n  KNOWLEDGE_SOURCE_STANDARD_SIZE,\n  createPath\n} from './OutlineUtil';\n\nconst DEFAULT_OFFSET = 5;\n\n/**\n * DMN-specific outline provider.\n *\n * @implements {BaseOutlineProvider}\n *\n * @param {Outline} outline\n * @param {Styles} styles\n */\nexport default function OutlineProvider(outline, styles) {\n\n  this._styles = styles;\n\n  outline.registerProvider(this);\n}\n\nOutlineProvider.$inject = [\n  'outline',\n  'styles'\n];\n\n/**\n * Returns outline for a given element.\n *\n * @param {Element} element\n *\n * @return {Outline}\n */\nOutlineProvider.prototype.getOutline = function(element) {\n\n  const OUTLINE_STYLE = this._styles.cls('djs-outline', [ 'no-fill' ]);\n\n  var outline;\n\n  if (is(element, 'dmn:InputData')) {\n    outline = svgCreate('rect');\n\n    svgAttr(outline, assign({\n      x: -DEFAULT_OFFSET,\n      y: -DEFAULT_OFFSET,\n      rx: 27,\n      width: element.width + DEFAULT_OFFSET * 2,\n      height: element.height + DEFAULT_OFFSET * 2,\n    }, OUTLINE_STYLE));\n\n  } else if (\n    is(element, 'dmn:BusinessKnowledgeModel')\n    && isStandardSize(element, 'dmn:BusinessKnowledgeModel')\n  ) {\n    outline = createPath(\n      BUSINESS_KNOWLEDGE_MODEL_OUTLINE_PATH,\n      { x: -6, y:-6 },\n      OUTLINE_STYLE\n    );\n\n  } else if (\n    is(element, 'dmn:KnowledgeSource')\n    && isStandardSize(element, 'dmn:KnowledgeSource')) {\n    outline = createPath(\n      KNOWLEDGE_SOURCE_OUTLINE_PATH,\n      { x: -6, y:-1.5 },\n      OUTLINE_STYLE\n    );\n  }\n\n  return outline;\n};\n\n/**\n * Updates the outline for a given element.\n * Returns true if the update for the given element was handled by this provider.\n *\n * @param {Element} element\n * @param {Outline} outline\n * @returns {boolean}\n */\nOutlineProvider.prototype.updateOutline = function(element) {\n\n  if (isAny(element, [\n    'dmn:InputData',\n    'dmn:BusinessKnowledgeModel',\n    'dmn:KnowledgeSource'\n  ])) {\n    return true;\n  }\n\n  return false;\n};\n\n\n// helpers //////////\n\nfunction isStandardSize(element, type) {\n  var standardSize;\n\n  if (type === 'dmn:BusinessKnowledgeModel') {\n    standardSize = BUSINESS_KNOWLEDGE_MODEL_STANDARD_SIZE;\n  } else if (type === 'dmn:KnowledgeSource') {\n    standardSize = KNOWLEDGE_SOURCE_STANDARD_SIZE;\n  }\n\n  return element.width === standardSize.width\n          && element.height === standardSize.height;\n}"],"mappings":"AAAA,SAASA,MAAM,QAAQ,UAAU;AAEjC,SACEC,IAAI,IAAIC,OAAO,EACfC,MAAM,IAAIC,SAAS,QACd,UAAU;AAEjB,SACEC,EAAE,EACFC,KAAK,QACA,kCAAkC;AAEzC,SACEC,qCAAqC,EACrCC,6BAA6B,EAC7BC,sCAAsC,EACtCC,8BAA8B,EAC9BC,UAAU,QACL,eAAe;AAEtB,MAAMC,cAAc,GAAG,CAAC;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,eAAe,CAACC,OAAO,EAAEC,MAAM,EAAE;EAEvD,IAAI,CAACC,OAAO,GAAGD,MAAM;EAErBD,OAAO,CAACG,gBAAgB,CAAC,IAAI,CAAC;AAChC;AAEAJ,eAAe,CAACK,OAAO,GAAG,CACxB,SAAS,EACT,QAAQ,CACT;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACAL,eAAe,CAACM,SAAS,CAACC,UAAU,GAAG,UAASC,OAAO,EAAE;EAEvD,MAAMC,aAAa,GAAG,IAAI,CAACN,OAAO,CAACO,GAAG,CAAC,aAAa,EAAE,CAAE,SAAS,CAAE,CAAC;EAEpE,IAAIT,OAAO;EAEX,IAAIT,EAAE,CAACgB,OAAO,EAAE,eAAe,CAAC,EAAE;IAChCP,OAAO,GAAGV,SAAS,CAAC,MAAM,CAAC;IAE3BF,OAAO,CAACY,OAAO,EAAEd,MAAM,CAAC;MACtBwB,CAAC,EAAE,CAACZ,cAAc;MAClBa,CAAC,EAAE,CAACb,cAAc;MAClBc,EAAE,EAAE,EAAE;MACNC,KAAK,EAAEN,OAAO,CAACM,KAAK,GAAGf,cAAc,GAAG,CAAC;MACzCgB,MAAM,EAAEP,OAAO,CAACO,MAAM,GAAGhB,cAAc,GAAG;IAC5C,CAAC,EAAEU,aAAa,CAAC,CAAC;EAEpB,CAAC,MAAM,IACLjB,EAAE,CAACgB,OAAO,EAAE,4BAA4B,CAAC,IACtCQ,cAAc,CAACR,OAAO,EAAE,4BAA4B,CAAC,EACxD;IACAP,OAAO,GAAGH,UAAU,CAClBJ,qCAAqC,EACrC;MAAEiB,CAAC,EAAE,CAAC,CAAC;MAAEC,CAAC,EAAC,CAAC;IAAE,CAAC,EACfH,aAAa,CACd;EAEH,CAAC,MAAM,IACLjB,EAAE,CAACgB,OAAO,EAAE,qBAAqB,CAAC,IAC/BQ,cAAc,CAACR,OAAO,EAAE,qBAAqB,CAAC,EAAE;IACnDP,OAAO,GAAGH,UAAU,CAClBH,6BAA6B,EAC7B;MAAEgB,CAAC,EAAE,CAAC,CAAC;MAAEC,CAAC,EAAC,CAAC;IAAI,CAAC,EACjBH,aAAa,CACd;EACH;EAEA,OAAOR,OAAO;AAChB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAD,eAAe,CAACM,SAAS,CAACW,aAAa,GAAG,UAAST,OAAO,EAAE;EAE1D,IAAIf,KAAK,CAACe,OAAO,EAAE,CACjB,eAAe,EACf,4BAA4B,EAC5B,qBAAqB,CACtB,CAAC,EAAE;IACF,OAAO,IAAI;EACb;EAEA,OAAO,KAAK;AACd,CAAC;;AAGD;;AAEA,SAASQ,cAAc,CAACR,OAAO,EAAEU,IAAI,EAAE;EACrC,IAAIC,YAAY;EAEhB,IAAID,IAAI,KAAK,4BAA4B,EAAE;IACzCC,YAAY,GAAGvB,sCAAsC;EACvD,CAAC,MAAM,IAAIsB,IAAI,KAAK,qBAAqB,EAAE;IACzCC,YAAY,GAAGtB,8BAA8B;EAC/C;EAEA,OAAOW,OAAO,CAACM,KAAK,KAAKK,YAAY,CAACL,KAAK,IAChCN,OAAO,CAACO,MAAM,KAAKI,YAAY,CAACJ,MAAM;AACnD"}